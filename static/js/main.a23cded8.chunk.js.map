{"version":3,"sources":["components/Header.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/ImagePopup.js","utils/api.js","components/App.js","index.js"],"names":["Header","className","CurrentUserContext","React","createContext","Card","link","likes","name","owner","_id","onCardClick","onCardLike","onCardDelete","currentUser","useContext","isOwn","cardDeleteButtonClassName","isLiked","some","i","cardLikeButtonClassName","onClick","src","alt","length","Main","onEditProfile","onAddPlace","onEditAvatar","cards","avatar","about","map","card","key","Footer","PopupWithForm","title","children","buttonTitle","isOpen","onClose","onSubmit","EditProfilePopup","onUpdateUser","useState","setName","description","setDescription","useEffect","type","value","id","required","minLength","maxLength","onChange","e","target","preventDefault","EditAvatarPopup","onUpdateAvatar","avatarRef","useRef","ref","placeholder","current","AddPlacePopup","onSubmitCard","cardNameRef","cardLinkRef","ImagePopup","api","url","headers","this","fetch","then","res","_getResponseData","method","body","JSON","stringify","items","ok","json","Promise","reject","status","authorization","App","isEditProfilePopupOpen","isOpenEditProfile","isAddPlacePopupOpen","isOpenAddPlace","isEditAvatarPopupOpen","isOpenEditAvatar","selectedCard","isOpenSelectedCard","setCurrentUser","setCards","closeAllPopups","all","getUserInfo","getCardsFromServer","userInfo","data","item","catch","err","console","log","Provider","changeLikeCardStatus","newCard","newCards","c","deleteCard","filter","user","changeUserInfo","changeAvatar","addNewCard","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.a23cded8.chunk.js","sourcesContent":["import React from 'react';\n\nfunction Header(){\n  return(\n    <header className=\"header\">\n      <div className=\"logo\"></div>\n    </header>\n  )\n}\n\nexport default Header;","import React  from 'react';\nexport const CurrentUserContext = React.createContext();","import React from 'react';\nimport {CurrentUserContext} from '../contexts/CurrentUserContext';\n\nfunction Card({link, likes, name, owner, _id, onCardClick, onCardLike, onCardDelete}){\n  const currentUser = React.useContext(CurrentUserContext);\n\n  const handleCardClick = () =>{\n    onCardClick({link, name});\n  }\n\n  const handleLikeClick = () =>{\n    onCardLike({_id, likes});\n  }\n\n  const handleDeleteClick = () =>{\n    onCardDelete({_id});\n  }\n\n  // Определяем, являемся ли мы владельцем текущей карточки\n  const isOwn = owner._id === currentUser._id;\n\n  // Создаём переменную, которую после зададим в `className` для кнопки удаления\n  const cardDeleteButtonClassName = (\n    `${isOwn ? 'card__trash' : 'card__trash_hidden'}`\n  ); \n\n  // Определяем, есть ли у карточки лайк, поставленный текущим пользователем\n  const isLiked = likes.some(i => i._id === currentUser._id);\n\n  // Создаём переменную, которую после зададим в `className` для кнопки лайка\n  const cardLikeButtonClassName = (\n    `${isLiked ? 'card__like_black' : 'card__like'}`\n  ); \n  \n  return(\n    <div className=\"templateCard\">\n        <li className=\"card\">\n          <button className={cardDeleteButtonClassName} onClick={handleDeleteClick}></button>\n          <img src={link} alt=\"Место из названия\" className=\"card__picture\"  onClick={handleCardClick} />\n          <div className=\"card__description\">\n            <h3 className=\"card__title\">{name}</h3>\n            <div className=\"card__likeContainer\">\n              <button className={cardLikeButtonClassName} onClick={handleLikeClick}></button>\n              <span className=\"card__likeNumbers\">{likes.length}</span>\n            </div>\n          </div>\n        </li>\n      </div>\n  )\n}\n\nexport default Card;","import React from 'react';\nimport Card from './Card';\nimport {CurrentUserContext} from '../contexts/CurrentUserContext';\n\nfunction Main({onEditProfile, onAddPlace, onEditAvatar, onCardClick, cards, onCardLike, onCardDelete}){\n  const currentUser = React.useContext(CurrentUserContext);\n  \n  return(\n    <>\n      <section className=\"profile\">\n        <div className=\"profile__containerImage\">\n          <img className=\"profile__image\" src={currentUser.avatar} alt=\"Аватар\" onClick={onEditAvatar} />\n        </div>\n        <div className=\"profile__info\"> \n          <div className=\"profile__edit\">\n            <h1 className=\"profile__name\">{currentUser.name}</h1>\n            <button className=\"profile__button\"  onClick={onEditProfile}></button>\n          </div>\n          <p className=\"profile__about\">{currentUser.about}</p>\n        </div>\n        <button className=\"profile__addPicture\" onClick={onAddPlace}></button>\n      </section>\n\n      <ul className=\"cardsList\">\n        {cards.map(card => <Card key={card._id} {...card} onCardClick = {onCardClick} onCardLike = {onCardLike} onCardDelete = {onCardDelete} />)}\n      </ul>     \n    </>\n  )\n}\n\nexport default Main;","import React from 'react';\n\nfunction Footer(){\n  return(\n    <footer className=\"footer\">\n      &copy; 2020 Mesto Russia\n    </footer>\n  )\n}\n\nexport default Footer;","import React from 'react';\n\nfunction PopupWithForm({title, name, children, buttonTitle, isOpen, onClose, onSubmit}){\n  return(\n    <div className={isOpen ? `popup popup${name} popup_opened` : `popup popup${name}`}>\n          <div className=\"popup__container\">\n            <h3 className=\"popup__title\">{title}</h3>\n            <form  className={`popup__form popup__form${name}`} onSubmit = {onSubmit}>\n              {children}\n              <button className=\"popup__save\" >{buttonTitle}</button>\n            </form>\n            <button className=\"popup__close\" onClick={onClose}></button>\n          </div>\n        </div>\n  )\n}\n\nexport default PopupWithForm;","import React from 'react';\nimport PopupWithForm from './PopupWithForm';\nimport {CurrentUserContext} from '../contexts/CurrentUserContext';\nimport {useContext, useState} from 'react';\n\nfunction EditProfilePopup({isOpen, onClose, onUpdateUser}){\n  const currentUser = useContext(CurrentUserContext);\n  const [name, setName] =  useState('');\n  const [description, setDescription] =  useState('');\n    \n  React.useEffect(() => {\n    setName(currentUser.name || '');\n    setDescription(currentUser.about || '');\n  }, [currentUser]); \n\n  function handleChangeName(e) {\n    setName(e.target.value);\n  }\n\n  function handleChangeDescription(e) {\n    setDescription(e.target.value);\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    onUpdateUser({\n      name,\n      about: description,\n    });\n  } \n  \n  return(\n    <div>\n      <PopupWithForm \n          title = {'Редактировать профиль'}\n          name = {'EditProfile'}\n          buttonTitle = {'Сохранить'}\n          isOpen = {isOpen}\n          children = {\n            <>\n              <input type=\"text\" value={name} className=\"popup__input popup__name\" id='name-input' required minLength=\"2\" maxLength=\"40\" onChange={handleChangeName}/>\n              <span className='popup__input_error' id='name-input-error'></span>\n              <input type=\"text\" value={description} className=\"popup__input popup__about\" id='about-input' required minLength=\"2\" maxLength=\"200\" onChange={handleChangeDescription}/>\n              <span className='popup__input_error' id='about-input-error'></span>\n            </>\n          }\n          onClose = {onClose}\n          onSubmit = {handleSubmit}\n        />  \n    </div>\n  )\n}\n\nexport default EditProfilePopup;","import React from 'react'\nimport PopupWithForm from './PopupWithForm';\n\nfunction EditAvatarPopup({isOpen, onClose, onUpdateAvatar}){\n  const avatarRef = React.useRef();\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    onUpdateAvatar({\n      avatar:avatarRef.current.value\n    });\n  } \n\n  return(\n    <div>\n      <PopupWithForm \n          title = {'Обновить аватар'}\n          name = {'EditProfileAvatar'}\n          buttonTitle = {'Сохранить'}\n          isOpen = {isOpen}\n          children = {\n            <>\n              <input type=\"url\" ref = {avatarRef} className=\"popup__input popup__linkForAvatar\" name = \"linkAvatar\" id='linkForAvatar-input'  placeholder=\"Ссылка на аватар\" required />\n              <span className='popup__input_error' id='linkForAvatar-input-error'></span>\n            </>\n          }\n          onClose = {onClose}\n          onSubmit = {handleSubmit}\n        /> \n    </div>\n  )\n}\n\nexport default EditAvatarPopup;\n","import React from 'react';\nimport PopupWithForm from './PopupWithForm';\n\nfunction AddPlacePopup ({isOpen, onClose, onSubmitCard}){\n  const cardNameRef = React.useRef();\n  const cardLinkRef = React.useRef();\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    onSubmitCard({\n      name:cardNameRef.current.value,\n      link:cardLinkRef.current.value\n    });\n  } \n\n  return(\n    <div>\n      <PopupWithForm \n          title = {'Новое место'}\n          name = {'AddCard'}\n          buttonTitle = {'Создать'}\n          isOpen = {isOpen}\n          children = {\n            <>\n              <input type=\"text\" ref = {cardNameRef} className=\"popup__input popup__nameOfPlace\" name = \"name\" id='nameOfPlace-input' placeholder=\"Название\" required minLength=\"1\" maxLength=\"30\" /> \n              <span className='popup__input_error' id='nameOfPlace-input-error'></span>\n              <input type=\"url\" ref = {cardLinkRef} className=\"popup__input popup__linkForPicture\" name = \"link\" id='linkForPicture-input' placeholder=\"Ссылка на картинку\" required />\n              <span className='popup__input_error' id='linkForPicture-input-error'></span>\n            </>\n          }\n          onClose = {onClose}\n          onSubmit = {handleSubmit}\n        />  \n    </div>\n  )\n}\n\nexport default AddPlacePopup;","import React from 'react';\n\nfunction ImagePopup({card, onClose}){\n  return (\n    card ? (\n      <div className={\"popup popupPicture popup_opened\"}>\n        <div className=\"popupPicture__container\">\n          <img src={card.link} alt=\"Место из названия\" className=\"popupPicture__image\" />\n          <h3 className=\"popupPicture__title\">{card.name}</h3>\n          <button className=\"popup__close\" onClick={onClose}></button>\n        </div>\n      </div>\n    ) : null)\n  \n}\n\nexport default ImagePopup;","class Api{\n  constructor({url, headers}){\n    this.url = url;\n    this.headers = headers;\n  }\n  \n  getUserInfo(){\n    return fetch(`${this.url}/users/me`, {\n      headers: this.headers\n    })\n    .then(res =>{ \n      return this._getResponseData(res);\n    });\n  }\n\n  getCardsFromServer(){\n    return fetch(`${this.url}/cards`, {\n      headers: this.headers\n    })\n    .then(res =>{ \n      return this._getResponseData(res);\n    });\n  }\n\n  changeUserInfo({name, about}){\n    return fetch(`${this.url}/users/me`, {\n      method: 'PATCH',\n      headers: this.headers,\n      body: JSON.stringify({name, about})\n    })\n    .then(res =>{ \n      return this._getResponseData(res);\n    });\n  }\n\n  changeAvatar(items){\n    return fetch(`${this.url}/users/me/avatar`, {\n      method: 'PATCH',\n      headers: this.headers,\n      body: JSON.stringify(items)\n    })\n    .then(res =>{ \n      return this._getResponseData(res);\n    });\n  }\n\n  addNewCard(items){\n    return fetch(`${this.url}/cards`, {\n      method: 'POST',\n      headers: this.headers,\n      body: JSON.stringify(items)\n    })\n    .then(res =>{ \n      return this._getResponseData(res);\n    });\n  }\n\n  deleteCard(id){\n    return fetch(`${this.url}/cards/${id}`, {\n      method: 'DELETE',\n      headers: this.headers\n    })\n    .then(res =>{ \n      return this._getResponseData(res);\n    });\n  }\n\n  changeLikeCardStatus(id, isLiked){\n    return fetch(`${this.url}/cards/likes/${id}`, {\n      method: isLiked ?  'PUT' : 'DELETE',\n      headers: this.headers\n    })\n    .then(res =>{ \n      return this._getResponseData(res);\n    });\n  }\n\n  _getResponseData(res){    \n    if(res.ok){\n      return res.json()\n    }\n    return Promise.reject(`Ошибка: ${res.status}`);\n  }\n}\n\nconst api = new Api({\n  url: 'https://mesto.nomoreparties.co/v1/cohort-14',\n  headers: {\n    'Content-Type': 'application/json',\n    authorization: '2211156a-197b-42d9-becd-f429311725f7'\n  }\n})\n\nexport default api;","import React, { useEffect, useState } from 'react';\nimport Header from './Header';\nimport Main from './Main';\nimport Footer from './Footer';\nimport PopupWithForm from './PopupWithForm';\nimport EditProfilePopup from './EditProfilePopup';\nimport EditAvatarPopup from './EditAvatarPopup';\nimport AddPlacePopup from './AddPlacePopup';\nimport ImagePopup from './ImagePopup';\nimport api from '../utils/api';\nimport {CurrentUserContext} from '../contexts/CurrentUserContext';\n\nfunction App() {\n  const [isEditProfilePopupOpen, isOpenEditProfile] =  useState(false);\n  const [isAddPlacePopupOpen, isOpenAddPlace] =  useState(false);\n  const [isEditAvatarPopupOpen, isOpenEditAvatar] =  useState(false);\n  const [selectedCard, isOpenSelectedCard] =  useState(null);\n  const [currentUser, setCurrentUser] =  useState({});\n  const [cards, setCards] =  useState([]);\n  \n  useEffect(()=>{\n    Promise.all([ \n      api.getUserInfo(), \n      api.getCardsFromServer() \n    ]) \n    .then( \n      json=>{ \n        const [userInfo, data] = json; \n        setCurrentUser(userInfo)\n        const items = data.map(item => ({ \n          link: item.link,\n          likes: item.likes,\n          name: item.name,\n          _id:item._id,\n          owner:item.owner\n          })) \n          setCards(items) \n        }\n    )\n    .catch((err) => { \n      console.log(err);  \n    }); \n  }, [])\n\n  function handleCardLike(card) {\n    // Снова проверяем, есть ли уже лайк на этой карточке\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\n    // Отправляем запрос в API и получаем обновлённые данные карточки\n    api.changeLikeCardStatus(card._id, !isLiked).then((newCard) => {\n      // Формируем новый массив на основе имеющегося, подставляя в него новую карточку\n      const newCards = cards.map((c) => c._id === card._id ? newCard : c);\n      // Обновляем стейт\n      setCards(newCards);\n    })\n    .catch((err) => { \n      console.log(err);  \n    }); \n  } \n\n  function handleCardDelete(card){\n    api.deleteCard(card._id).then(() => {\n      const newCards = cards.filter((c) => c._id !== card._id );\n      setCards(newCards);\n    })\n    .catch((err) => { \n      console.log(err);  \n    }); \n  }\n\n  function handleEditProfileClick(){\n    isOpenEditProfile(true);\n  }\n\n  function handleEditAvatarClick(){\n    isOpenEditAvatar(true);\n  }\n\n  function handleAddPlaceClick(){\n    isOpenAddPlace(true);\n  }\n\n  function handleUpdateUser(user){\n    api.changeUserInfo(user)\n    .then(res=>{\n      setCurrentUser(res)\n    })\n    .catch((err) => { \n      console.log(err);  \n    }); \n    isOpenEditProfile(false);\n  }\n\n  function handleUpdateAvatar(avatar){\n    api.changeAvatar(avatar)\n    .then(res=>{\n      setCurrentUser(res)\n    })\n    .catch((err) => { \n      console.log(err);  \n    }); \n    isOpenEditAvatar(false);\n  }\n\n  function handleAddPlaceSubmit(card){\n    api.addNewCard(card).then(\n      (newCard) => {\n      setCards([...cards, newCard]); \n    })\n    .catch((err) => { \n      console.log(err);  \n    }); \n    isOpenAddPlace(false);\n  }\n\n  function closeAllPopups(){\n    isOpenEditProfile(false);\n    isOpenEditAvatar(false);\n    isOpenAddPlace(false);\n    isOpenSelectedCard(null)\n  }\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n    <div className=\"page\">\n      <div className=\"page__container\">\n        <Header />\n        <Main \n          onEditProfile = {handleEditProfileClick}\n          onAddPlace = {handleAddPlaceClick}\n          onEditAvatar = {handleEditAvatarClick}\n          onCardClick = {isOpenSelectedCard}\n          cards = {cards}\n          onCardLike = {handleCardLike}\n          onCardDelete = {handleCardDelete}\n        />\n        <Footer />\n        \n        <EditProfilePopup \n          isOpen={isEditProfilePopupOpen} \n          onClose={closeAllPopups} \n          onUpdateUser = {handleUpdateUser} \n        /> \n\n        <EditAvatarPopup \n          isOpen={isEditAvatarPopupOpen} \n          onClose={closeAllPopups} \n          onUpdateAvatar = {handleUpdateAvatar}\n        /> \n\n        <AddPlacePopup \n          isOpen={isAddPlacePopupOpen} \n          onClose={closeAllPopups} \n          onSubmitCard = {handleAddPlaceSubmit}\n        />\n\n        <PopupWithForm \n          title = {'Вы уверены?'}\n          name = {'DeleteCard'}\n          buttonTitle = {'Да'}\n        /> \n          \n        <ImagePopup \n          card = {selectedCard}\n          onClose = {closeAllPopups}\n        />\n      </div>\n    </div>\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}